[{"title":"CobaltStike4使用笔记","date":"2021-09-08T07:30:57.000Z","url":"/2021/09/08/CobaltStike4%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/","categories":[["undefined",""]],"content":" CobaltStike4简称CS，一个团队协作的渗透神器，集成了：提权，凭据导出，端口转发，socket代理，office攻击，文件捆绑，钓鱼等功能。分为客户端(Client)和服务端(Teamserver)。 启动CS1.首先要在服务端运行teamserver，然后设置客户端登陆密码，具体的格式为： host：服务端ip password：登录密码 YYYY-MM-DD：设置Beacon payload在被攻击系统运行的时间，方便攻击人员在一次行动后迅速清理痕迹。 2.在客户端点击start.bat运行，输入host和password即可。 因为CS监听50050端口，所以在vps开启50050的进出访问： 然后vps运行teamserver： 运行客户端： CS界面 CS监听器，生成恶意exeCS生成监听器： CS的监听器有： DNS,HTTP,HTTPS,SMB,TCP内部的监听器，Foreign是外部监听器一般和msf进行联动。 CS生成Beacon HTTP上线win10 生成监听器 生成exe可执行程序 成功上线 右键进入beacon 上线win7 win7 uac提权 msf和cs联动 要用到foregin监听器 首先在msf上监听端口 然后在上线的机器上生成新的会话 选择cs和msf联动的对话即可 cs设置重定向(跳板) 这是很重要的一点，可以隐藏攻击人员的身份。 首先将代理服务器8081端口流量全部转发到cs服务器上： 然后访问cs服务器 在cs中View→Web log查看流量： 如上图显示 说明代码服务器配置完成。 生成一个监听器，生成exe让win7执行，查看win7和cs的连接情况： 看到win7是直接和跳板机连接的。 我们可以设置多个代理服务器，关闭一个不会影响其他。"},{"title":"test","date":"2021-09-08T07:03:44.000Z","url":"/2021/09/08/test/","categories":[["undefined",""]],"content":""}]